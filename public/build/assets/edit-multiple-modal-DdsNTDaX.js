let l=[],s=1;const m=document.getElementById("edit-selected-btn");m&&m.addEventListener("click",function(e){const t=document.querySelectorAll(".student-checkbox:checked");if(t.length===0)e.preventDefault(),Swal.fire({title:"No Student Selected",text:"Please select at least one student before editing.",icon:"info",backdrop:!1,confirmButtonColor:"#3085d6",timer:1e4,timerProgressBar:!0});else{const n=Array.from(t).map(o=>o.value),d=document.getElementById("selected-student-ids");d&&(d.value=n.join(","));const c=document.getElementById("edit-multiple-student-modal");c&&new bootstrap.Modal(c).show()}});const a=document.getElementById("select-all-checkbox"),h=document.querySelector("tbody");a&&a.addEventListener("change",function(){const e=this.checked;document.querySelectorAll(".student-checkbox").forEach(t=>{t.checked=e}),l=e?Array.from(document.querySelectorAll(".student-checkbox")).map(t=>({id:t.value,name:t.getAttribute("data-name")})):[],s=1,i(),u()});h&&h.addEventListener("change",function(e){if(e.target.classList.contains("student-checkbox")){const t=e.target,n={id:t.value,name:t.getAttribute("data-name")};t.checked?l.push(n):l=l.filter(d=>d.id!==n.id),g(),s=1,i(),u()}});function g(){const e=document.querySelectorAll(".student-checkbox").length,t=document.querySelectorAll(".student-checkbox:checked").length;a&&(a.checked=e===t,a.indeterminate=t>0&&t<e)}const f=document.getElementById("edit-multiple-student-modal");f&&f.addEventListener("shown.bs.modal",function(){l=Array.from(document.querySelectorAll(".student-checkbox:checked")).map(e=>({id:e.value,name:e.getAttribute("data-name")})),s=1,i(),u()});function i(){const e=document.getElementById("selected-student-names-display");if(!e)return;e.innerHTML="";const t=(s-1)*5,n=Math.min(t+5,l.length);l.slice(t,n).forEach(o=>{const r=document.createElement("li");r.classList.add("list-group-item"),r.textContent=o.name,e.appendChild(r)});const c=document.getElementById("selected-student-ids");c&&(c.value=l.map(o=>o.id).join(","))}function u(){const e=document.getElementById("pagination");if(!e)return;e.innerHTML="";const t=Math.ceil(l.length/5);for(let n=1;n<=t;n++){const d=document.createElement("li");d.className="page-item"+(n===s?" active":"");const c=document.createElement("a");c.className="page-link",c.textContent=n,c.href="#",c.addEventListener("click",function(o){o.preventDefault(),s=n,i(),u()}),d.appendChild(c),e.appendChild(d)}}
